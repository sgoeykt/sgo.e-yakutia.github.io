var core=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.core=void 0,n(2);var r=w(n(3));n(5),n(6);var i=w(n(7));n(8);var a=w(n(9)),s=v(n(10)),l=v(n(11)),u=v(n(12)),c=v(n(14)),d=v(n(15)),f=v(n(16)),p=v(n(17)),h=w(n(18)),m=w(n(19));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function w(e){return e&&e.__esModule?e:{default:e}}n(20),n(21),n(22),n(23);var y=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if("default"===n)continue;e.hasOwnProperty(n)&&(t[n]=e[n])}},b={deferredResLoader:r.default,extDeferred:i.default,resetScreen:a.default};t.core=b,y(l,b),y(s,b),y(p,b),y(u,b),y(c,b),y(d,b),y(f,b),y(h.default,b),b.shower=m.default,$(document).ready((function(){p.initButtonLock()})),y(b,window)},function(e,t,n){"use strict";var o,r,i;void 0===document.documentElement.closest&&(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return!!t[n]},Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t="SVGElement"in window&&t instanceof SVGElement?t.parentNode:t.parentElement}return null},r=[window.Element,window.CharacterData,window.DocumentType],i=[],r.forEach((function(e){e&&i.push(e.prototype)})),function(e){e.forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}))}(i),(o=window).URLSearchParams=o.URLSearchParams||function(e){var t=this;t.searchString=e,t.get=function(e){var n=new RegExp("[?&]"+e+"=([^&#]*)").exec(t.searchString);return null==n?null:decodeURI(n[1])||0}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(4);function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=["/static/dist/common/css/ext-styles.min.css"],l=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scriptsToLoad=[],this._allScriptLoadedDefer=$.Deferred(),this._allScriptLoadedPromise=this._allScriptLoadedDefer.promise(),this._resourceLoader=new o.ResourceLoader(window.getVersionedLink),this.scriptsAlreadyLoaded=0,this._baseLoadHandler=function(e){if(this.scriptsAlreadyLoaded++,this.scriptsAlreadyLoaded===this.scriptsToLoad.length)return this._allScriptLoadedDefer.resolve()},window.addEventListener?window.addEventListener("load",(function(){return t.loadHandler()}),!1):window.attachEvent?window.attachEvent("onload",(function(){return t.loadHandler()})):window.onload=function(){return t.loadHandler()}}var t,n,i;return t=e,(n=[{key:"_proxyLoadHandler",value:function(e){var t=this;return function(n){return e&&e(n),t._baseLoadHandler(n)}}},{key:"loadHandler",value:function(){var e=this,t="dev"===("undefined"!=typeof appContext&&null!==appContext?appContext.environment:void 0)?"/static/dist/common/js/ext-scripts.js":"/static/dist/common/js/ext-scripts.min.js";this.scriptsToLoad.push({src:t});var n,o=r(s);try{for(o.s();!(n=o.n()).done;){var i=n.value;this._resourceLoader.loadStyleSheet(i)}}catch(e){o.e(e)}finally{o.f()}var a,l=r(this.scriptsToLoad);try{var u=function(){var t=a.value,n=e._proxyLoadHandler(t.handler);e._resourceLoader.loadScript(t.src,(function(e){return n(e)}))};for(l.s();!(a=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}}},{key:"loadScript",value:function(e,t){return this.scriptsToLoad.push({src:e,handler:t})}},{key:"loadStyle",value:function(e){return s.push(e)}},{key:"loadJsScript",value:function(e,t){return this._resourceLoader.loadScript(e,t)}},{key:"ready",value:function(e){return this._allScriptLoadedPromise.then(e)}},{key:"promise",value:function(){return this._allScriptLoadedPromise}}])&&a(t.prototype,n),i&&a(t,i),e}());window.deferredResLoader=l;var u=l;t.default=u},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionedLink=t.ResourceLoader=void 0;var r=function(e){return"undefined"==typeof appContext?e:e+"?ver="+appContext.version};t.getVersionedLink=r;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=document.getElementsByTagName("head")[0]||document.documentElement,this.getVersionedLink=t||r}var t,n,i;return t=e,(n=[{key:"loadStyleSheet",value:function(e){e=this.getVersionedLink(e),document.createStyleSheet?document.createStyleSheet(e):$(this.head).append($("<link rel='stylesheet' href='".concat(e,"' type='text/css' media='screen' />")))}},{key:"loadScript",value:function(e,t){var n=this,o=!1,r=function(r){var i=document.createElement("script"),a=n.getVersionedLink(e);i.src=a,i.async=!1,i.onload=function(){o||(o=!0,t&&t(e),n.head&&i.parentNode&&n.head.removeChild(i),r())},i.onreadystatechange=function(){var e=n;if("complete"===n.readyState||"loaded"===n.readyState)return setTimeout((function(){return e.onload()}),0)},n.head.insertBefore(i,n.head.firstChild)};if("undefined"==typeof Promise){var i=$.Deferred();return r((function(){return i.resolve()})),i.promise()}return new Promise(r)}}])&&o(t.prototype,n),i&&o(t,i),e}();t.ResourceLoader=i},function(e,t){$(window).on("load",(function(){var e;return(e=$("#page-preloader")).find(".spinner").fadeOut(),e.delay(350).fadeOut("slow")}))},function(e,t){!function(e){var t,n,o;n=function(t){var n,o,r,i;if(n=e("span[class=text]",t),(o=t.parent(".input-group")).length>0?(i=n.width()+o.find(".input-group-btn").width(),r=o.parent().width()):(r=t.width(),i=n.width()),r<=i)return t.attr("data-original-title",n.text()),t.popover({placement:"bottom",html:"true",trigger:"hover"})},e(document).ready((function(){return e("span.form-control-title, span.form-control").each((function(){return n(e(this))}))})),t=function(t){e(t).on({keypress:function(e){if(e=e||window.event,String.fromCharCode(e.charCode),13===e.keyCode)return!1}})},e(document).ready((function(){return e("form").each((function(){var n;if(1===(n=e(this).find('input[type="text"]')).length)return t(n)}))})),e.uicontrols={select:function(t){var n,o,r,i,a,s;for(n=e("<select></select>").addClass("form-control").attr("id",t.id).attr("name",t.name),o=0,i=(a=t.items).length;o<i;o++)r=a[o],e("<option></option>").val(r.value).append(null!=(s=r.title)?s.escapeHTML():void 0).appendTo(n);return n},button:function(t){var n,o;return o={type:"btn-default"},t=e.extend({},o,t),n=e("<button></button>").addClass("btn").addClass(t.type).attr("type","button"),t.size&&n.addClass(t.size),t.icon&&n.append(e("<span></span>").addClass("glyphicon glyphicon-"+t.icon)),t.id&&n.attr("id",t.id),t.label&&n.append(" "+t.label),t.name&&n.attr("name",t.name),t.title&&n.attr("title",t.title),"function"==typeof t.click?n.on("click",t.click):"string"==typeof t.click&&n.attr("onclick",t.click),n},linkButton:function(t){var n,o,r,i,a;for(n=e("<div></div>"),o=0,r=t.length;o<r;o++)a=t[o],i=e("<a></a>"),a.classButton&&i.addClass(a.classButton),a.title&&i.attr("title",a.title),t.id&&i.attr("id",t.id),a.icon&&i.append(e("<span></span>").addClass("glyphicon "+a.icon)),a.click&&i.attr("href",a.click),n.append(i);return n},title:function(t){var o;return o=e("<span></span>").addClass("form-control").addClass("form-control-title"),e("<span></span>").addClass("text").append(t).appendTo(o),setTimeout((function(){return n(o)}),500),o},info:function(t){return e("<div></div>").addClass("alert").addClass("alert-info").attr("role","alert").html(t)}},jQuery.fn.ajaxSelect=function(){this.selectpicker({liveSearch:!0}).ajaxSelectPicker({ajax:{data:function(){return{query:e(".bs-searchbox input").val(),AT:strATTok}},type:"GET"},preprocessData:function(e){var t;if("undefined"==typeof customHandler)return t=[],_.each(e.data.values,(function(e){t.push({value:e.id,text:e.name,disable:!1})})),t;customHandler(e)},preserveSelected:!1,requestDelay:1e3})},jQuery.fn.inputRules=(o={inputNum:function(t){var n,o;n={minVal:.01,maxVal:null,allowFractional:!0},o=e.extend(n,t),e(this,"input").on({keypress:function(e){var t,n;return e=e||window.event,t=String.fromCharCode(e.charCode),(8===(n=e.keyCode)||9===n||37===n||39===n||46===n)&&"."!==t||"1234567890".indexOf(t)>-1||!(!(o.allowFractional&&".,".indexOf(t)>-1)||/[.,]/.test(this.value))}}).on("blur",(function(){var t,n,r,i,a;return t=e(this),r=parseFloat(o.minVal),a=parseFloat(t.val().replace(",",".")),isNaN(a)||0===a?(t.val(""),t.trigger("change"),void(this.wasChanged()||(window.dataWereChanged=!1))):o.maxVal&&a>(n=parseFloat(o.maxVal))?(t.val(""),t.trigger("change"),window.dataWereChanged=!1,focusAlert(t,language.Generic.Common.kMaxInput+n)):a<r?(t.val(""),t.trigger("change"),window.dataWereChanged=!1,focusAlert(t,language.Generic.Common.kMinInput+r)):(i=a.toString().replace(".",","),t.val(i))}))}},function(t){if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("Метод с именем "+t+" не существует для jQuery.inputRules")})}(jQuery)},function(e,t){var n,o;o=function(e){for(var t;"function"==typeof e;)e=e();return Array.isArray(e)&&(e=n.when(e)),void 0===e||"boolean"==typeof e?(t=$.Deferred(),e?t.resolve():t.reject(),t.promise()):"undefined"!=typeof Promise&&e instanceof Promise?(t=$.Deferred(),e.then((function(){return t.resolve()}),(function(){return t.reject()})),t.promise()):e},n={wrapPromise:function(e,t,n){return function(){return $.when(e()).then(t,n)}},wrapAlwaysPromise:function(e){return function(){var t,o;return t=$.Deferred(),o=function(){return t.resolve()},n.wrapPromise(e,o,o)(),t.promise()}},resolve:function(){var e;return(e=$.Deferred()).resolve(),e.promise()},when:function(){var e,t,n,r,i,a;return t=$.Deferred(),e=arguments,1===arguments.length&&"object"==typeof arguments[0]&&(e=arguments[0]),0===e.length?(t.resolve(),t.promise()):(i=function(){t.reject()},a=function(){t.resolve()},r=function(t){var n,s;return n=e[t],s=function(){return o(n)},t<e.length-1?function(){return $.when(s()).then(r(t+1),i)}:t===e.length-1?function(){return $.when(s()).then(a,i)}:a},n=e[0],$.when(o(n)).then(r(1),i),t.promise())}},e.exports=n},function(e,t){(function(){"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("ifNull",(function(e,t){return null===e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifNotNull",(function(e,t){return null!==e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("currentDate",(function(e){var t;return e=e.substring(0,19),t=new Date(e),dateUtils.date2str(t)+" "+dateUtils.time2Str_ss(t)})),Handlebars.registerHelper("date2str",(function(e){return void 0===e||null==e?"":("string"==typeof e&&(e=new Date(e)),dateUtils.date2str(e))})),Handlebars.registerHelper("uCase",(function(e){return strCheckIsNull(e).toUpperCase()})),Handlebars.registerHelper("lCase",(function(e){return strCheckIsNull(e).toLowerCase()})),Handlebars.registerHelper("match",(function(e){return e+1})),Handlebars.registerHelper("debug",(function(e){if(console.log("Current Context"),console.log("===================="),console.log(this),e)return console.log("Value"),console.log("===================="),console.log(e)})),Handlebars.registerHelper("ifCond",(function(e,t,n,o){switch(t){case"==":case"===":return e===n?o.fn(this):o.inverse(this);case"<":return e<n?o.fn(this):o.inverse(this);case"<=":return e<=n?o.fn(this):o.inverse(this);case">":return e>n?o.fn(this):o.inverse(this);case">=":return e>=n?o.fn(this):o.inverse(this);case"&&":return e&&n?o.fn(this):o.inverse(this);case"||":return e||n?o.fn(this):o.inverse(this);default:return o.inverse(this)}})),Handlebars.registerHelper("forLoop",(function(e,t,n,o){var r,i,a,s,l;for(r="",i=a=e,s=t,l=n;l>0?a<=s:a>=s;i=a+=l)r+=o.fn(i);return r})))}).call(this)},function(e,t){var n;$(document).ready((function(){var e,t,n,o,r;for("function"==typeof CalculateOSH&&CalculateOSH(),r=[],t=0,n=(o=document.forms).length;t<n;t++)e=o[t],r.push($(e).rememberState());return r})),function(e){e.fn.rememberState=function(){e("input:not([type=hidden]), select, textarea, .text-data",this).each((function(t,n){var o;return o="radio"===n.type||"checkbox"===n.type?n.checked:e(n).hasClass("text-data")?e(n).text():e(n).val(),e(n).data("storedState",o),n.wasChanged=function(){return("radio"===this.type||"checkbox"===this.type?this.checked:e(this).hasClass("text-data")?e(this).text():e(this).val())!==e(this).data("storedState")}}))},e.fn.resetState=function(){e("input:not([type=hidden]), select, textarea, .text-data",this).each((function(t,n){var o;if(!e(n).is(":disabled"))return o=e(n).data("storedState"),"radio"===n.type||"checkbox"===n.type?e(n).prop("checked",o):e(n).hasClass("text-data")?e(n).text(o):e(n).val()!==o?e(n).val(o).trigger("change"):void 0}))},e.fn.dataChanged=function(){var t;return t=!1,e("input:not([type=hidden]), select, textarea, .text-data",this).each((function(n,o){var r;return r="radio"===o.type||"checkbox"===o.type?o.checked:e(o).hasClass("text-data")?e(o).text():e(o).val(),void 0===e(o).data("storedState")||null===e(o).data("storedState")||(!(r!==e(o).data("storedState"))||(t=!0,!1))})),t}}(jQuery),n=function(e){var t;if(t=document.forms[e],$(t).dataChanged())return $(t).resetState(),this.dataWereChanged=!1,alert(language.Generic.Common.kResetChanges);alert(language.Generic.SetupSchoolUI.kDataNotModified)},e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimStr=t.strCheckIsNull=t.str2lngEx=t.str2lng=t.getListValue=t.getListText=t.getItemValue=void 0;t.str2lngEx=function(e){var t,n;return""!==(n=o(e.value))?(t=parseInt(n),isNaN(t)||(n=t.toString(),e.value=n),t):(e.value=n,n)};var o=function(e){return null==e?"":e.toString().trim()};t.trimStr=o;t.str2lng=function(e){var t,n;for(e=o(e),t=0;t<e.length&&"0"===e.charAt(t);)t++;for(n=t;n<e.length&&"0"<=e.charAt(n)&&e.charAt(n)<="9";)n++;return t<e.length?n<e.length?Number.NaN:parseInt(e.substring(t,n),10):0};t.strCheckIsNull=function(e){return void 0===e||null==e?" ":e};t.getItemValue=function(e){return null!==e.value?e.value:e.options[e.selectedIndex].value};t.getListValue=function(e){return e.options[e.selectedIndex].value};var r;t.getListText=function(e){return e.options[e.selectedIndex].text},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},"function"!=typeof String.prototype.escapeHTML&&(String.prototype.escapeHTML=function(){return this.replace(/[<>"'\/]|&(?!nbsp;)/g,(function(e){return r[e]}))}),"function"!=typeof String.prototype.format&&(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n]:t}))}),"function"!=typeof String.prototype.templateFormat&&(String.prototype.templateFormat=function(e){var t,n,o;for(t in o=this,e)n=e[t],o=o.replace("_"+t+"_",n);return o}),"function"!=typeof String.prototype.normalizeFileName&&(String.prototype.normalizeFileName=function(){return this.replace(/["]/g,"'").replace(/[\/:*?<>|+\/]/g,"")}),"function"!=typeof String.prototype.repeat&&(String.prototype.repeat=function(e){var t,n;if(null===this)throw new TypeError("can't convert "+this+" to object");if(n=""+this,e!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(Infinity===e)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===n.length||0===e)return"";if(n.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(t="";1==(1&e)&&(t+=n),0!=(e>>>=1);)n+=n;return t})},function(e,t){var n,o,r,i,a,s,l,u;l={firstYear:parseInt((new Date).getFullYear().toString().substr(-2))+15,nsFormat:"d"+String.fromCharCode(1)+"mm"+String.fromCharCode(1)+"yy"+String.fromCharCode(1)+".",nsFormatTime:"h"+String.fromCharCode(1)+"mm"+String.fromCharCode(1)+":"+String.fromCharCode(1),timezoneStamp:"04:00",dateFormat:{format:"d.mm.yy",delimeter:"."},timeFormat:{format:"h.mm.ss",delimeter:":"}},u=function(e){var t,n;return e?(t=(n=e.split(String.fromCharCode(1)))[3],n.pop(),{format:n.join(t),delimeter:t}):l.dateFormat},o={init:function(e,t){var n;if(n=-(new Date).getTimezoneOffset()/60,l.timezoneStamp=(n>=10?"":"0")+n+":00",void 0!==e&&(l.nsFormat=e,l.dateFormat=u(e)),void 0!==t)return l.nsFormatTime=t,l.timeFormat=u(t)},str2date:function(e){return r(e,l.nsFormat,String.fromCharCode(1),l.firstYear)},str2dateFormat:function(e,t){return r(e,t,String.fromCharCode(1),l.firstYear)},str2time:function(e){return i(e,l.nsFormatTime)},date2str:function(e){return n(e,l.nsFormat)},date2strfrm:function(e,t){return n(e,t)},time2str:function(e){return s(e,l.nsFormatTime)},time2Str_ss:function(e){return a(e,l.nsFormatTime)},getDateFormat:function(){return l.dateFormat},getLocaleFormat:function(){var e,t;return e=l.dateFormat,t={d:"д",dd:"дд",m:"м",mm:"мм",yy:"гг",yyyy:"гггг"},e.format.split(e.delimeter).map((function(e){return t[e]})).join(e.delimeter)},getTimeFormat:function(){return l.timeFormat},getLocalDateTime:function(e){return new Date(e+"+"+l.timezoneStamp)},getUTCDate:function(e,t,n){return new Date(Date.UTC(e,t,n))},asUTC:function(e){var t;return(t=new Date(e.getTime())).setHours(e.getHours()-e.getTimezoneOffset()/60),t},castServerDateTimeToClient:function(e){var t,n,o;return o=moment(e).toDate(),n=appContext.serverTimeZone,t=(new Date).getTimezoneOffset()/-60-n,o.setTime(o.getTime()+36e5*t),o},asUTCDate:function(e){var t,n,o,r;return r=(t=new Date(e)).getFullYear(),o=t.getMonth(),n=t.getDate(),new Date(Date.UTC(r,o,n))}},r=function(e,t,n,o){var r,i,a,s,l,u,c;if(n=(a=t.split(n))[3],3!==(i=e.split(n)).length)return null;for(s=l=0;l<=2;s=l+=1)if("m"===a[s]||"mm"===a[s]){if(!i[s])return null;if(u=str2lng(i[s]),isNaN(u)||u<=0||u>12)return null}else if("d"===a[s]||"dd"===a[s]){if(!i[s])return null;if(r=str2lng(i[s]),isNaN(r)||r<=0||r>31)return null}else if("yy"===a[s]||"yyyy"===a[s]){if(!i[s])return null;if((c=str2lng(i[s]))<100?c=c<o?2e3+c:1900+c:(c>=100&&c<1e3||c>9999)&&(c=NaN),isNaN(c))return null}return r>30&&(4===u||6===u||9===u||11===u)||2===u&&r>(c%4==0&&c%100!=0||c%400==0?29:28)?null:new Date(Date.UTC(c,u-1,r))},n=function(e,t){var n,o,r,i,a,s,l,u;for(l="",o=(r=t.split(String.fromCharCode(1)))[3],u=e.getFullYear(),s=e.getMonth()+1,n=e.getDate(),i=a=0;a<=2;i=a+=1)"m"===r[i]?l+=s.toString()+o:"mm"===r[i]?l+=(s<10?"0":"")+s.toString()+o:"d"===r[i]?l+=n.toString()+o:"dd"===r[i]?l+=(n<10?"0":"")+n.toString()+o:"yy"===r[i]?l+=((u%=100)<10?"0":"")+u.toString()+o:"yyyy"===r[i]&&(l+=u.toString()+o);return l.slice(0,-1)},s=function(e,t){var n,o,r,i,a,s,l,u,c;for(c="",null===e&&(e=new Date(0,0)),o=(r=t.split(String.fromCharCode(1)))[2],i=e.getHours(),l=e.getMinutes(),u=e.getSeconds(),n=r[3],a=s=0;s<=3;a=s+=1)"h"===r[a].charAt(0)?(""!==n&&(12===i?n=r[4]:i>12?(i-=12,n=r[4]):(i=0)&&(i=12)),"hh"===r[a]?c+=(i<10?"0":"")+i.toString()+o:c+=i.toString()+o):"mm"===r[a]?c+=(l<10?"0":"")+l.toString()+o:"ss"===r[a]&&(c+=(u<10?"0":"")+u.toString()+o);return c.slice(0,-1)},a=function(e,t){var n;return null===e?"00:00:00":s(e,t)+t.split(String.fromCharCode(1))[2]+((n=e.getSeconds())<10?"0":"")+n.toString()},i=function(e,t){var n,o,r,i,a,s,l,u;if(n=(o=t.split(String.fromCharCode(1)))[2],2!==(u=e.split(n)).length)return null;for(i=a=0;a<=2;i=a+=1)"h"===o[i].charAt(0)?r=parseInt(u[i]):"m"===o[i].charAt(0)?s=parseInt(u[i]):"s"===o[i].charAt(0)&&(l=parseInt(u[i]));return void 0===l&&(l=0),(o[3]=u[4])&&(r+=12),new Date(0,0,0,r,s,l)},$(document).ready((function(){if("undefined"!=typeof appContext)return o.init(appContext.dateFormat,appContext.timeFormat)})),e.exports={dateUtils:o,str2datef:r,date2strf:n,timeTwoStrf:s,time2Str_ss_f:a,strTwoTimef:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveFormPosition=t.restoreFormPosition=t.postTo=void 0;var o=n(13);t.postTo=function(e,t,n,r){var i,a={path:"",method:"POST",params:void 0,formParams:void 0,auth:!0,nocache:!0};"string"==typeof e?(i=a,e&&(i.path=e),t&&(i.params=t),n&&(i.formParams=n),!1===r&&(i.auth=!1)):i=$.extend({},a,e);var s=function(e,t,n){var o=document.createElement("input");return o.setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)},l=document.createElement("form");if(l.setAttribute("method",i.method),l.setAttribute("action",i.path),"undefined"!==i.formParams)for(var u in i.formParams)l.setAttribute(u,i.formParams[u]);var c="undefined"!=typeof appContext&&appContext.at||window.strATTok;i.auth=i.auth&&c,i.auth&&s(l,"at",c);var d=null;if(i.nocache&&(d=window.getVer().toString(),s(l,"VER",d)),i.formParams&&i.formParams.download){var f=null;f=window.setInterval((function(){if($.cookie("fileDownloadToken")===d)return window.clearInterval(f),$.cookie("fileDownloadToken",null),$(document).trigger("closeProcessing")}),1e3),$(document).trigger("showProcessing")}return o.instance.iterateParams(i.params,(function(e,t){i.auth&&"AT"===e||s(l,e,t)})),document.body.appendChild(l),window.isHaveToLogout=!1,l.submit()};t.saveFormPosition=function(e,t){var n=[];$.each($('[data-toggle="collapse"]'),(function(e,t){var o=$(t),r=o.attr("data-target"),i=o.attr("aria-expanded");n[e]={id:r,isExpanded:i}}));var o={position:$(window).scrollTop(),panels:n},r=new Date;r.setTime(r.getTime()+18e5);var i={expires:r};t&&(i=$.extend(i,{path:t})),$.cookie(e,JSON.stringify(o),i)};t.restoreFormPosition=function(e){return new Promise((function(t){if($.cookie(e)){var n=JSON.parse($.cookie(e));n.panels.forEach((function(e){var t=$('[data-target="'.concat(e.id,'"]')).attr("aria-expanded");e.isExpanded!=t&&$(e.id).collapse("toggle")})),setTimeout((function(){t(),$("html, body").animate({scrollTop:n.position},200)}),1e3),document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;")}else t()}))}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.UrlHelper=void 0;var u=function(){function e(t){a(this,e),this._url=t,this._params=""}return l(e,[{key:"url",value:function(){return this._url}},{key:"params",value:function(){return this._params}},{key:"addParam",value:function(e,t){0!==this._params.length&&(this._params+="&"),this._params+=encodeURIComponent(e)+"="+encodeURIComponent(t)}},{key:"getFullUrl",value:function(){return this._params.length>0?this._url.indexOf("?")>0?this._url+"&"+this._params:this._url+"?"+this._params:this._url}}]),e}(),c=function(){function e(){a(this,e)}return l(e,[{key:"iterateParams",value:function(e,t){if("string"!=typeof e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(Array.isArray(i)){var a,s=r(i);try{for(s.s();!(a=s.n()).done;){t(n,a.value)}}catch(e){s.e(e)}finally{s.f()}}else i&&"object"===o(i)&&void 0!==i.name?t(i.name,i.value):t(n,i)}}else{var l,u=r(e.split("&"));try{for(u.s();!(l=u.n()).done;){var c=l.value.split("=");t(c[0],c[1])}}catch(e){u.e(e)}finally{u.f()}}}},{key:"makeUrl",value:function(e,t,n){var o=new u(e);if(!n&&void 0!==window.strATTok){o.addParam("at",window.strATTok);var r=getVer();o.addParam("ver",r)}return this.iterateParams(t,(function(e,t){return o.addParam(e,t)})),o.getFullUrl()}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);if(!n)return null;if(!n[2])return"";var o=n[2].replace(/\+/g," ");return decodeURIComponent(o)}}]),e}();t.UrlHelper=c;var d=new c;t.instance=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.haveToLogout=t.goHistoryBack=t.goCommonBack=t.goBack=t.checkForChanges=t.canSubmit=t.OnChangeSelect=t.GetForm=t.DoSubmit=void 0,t.isDBBusy=function(){return!window.bIsDBFree},t.ok_check_db=t.ok=void 0,t.setDBBusy=i,t.setDBFree=function(){window.bIsDBFree=!0};var o,r=(o=n(7))&&o.__esModule?o:{default:o};function i(){window.bIsDBFree=!1}window.isHaveToLogout=!0;var a=function(){return r.default.when(!window.dataWereChanged||$.show.getConfirmation(language.Generic.Common.kDataWereChanged))};t.checkForChanges=a;var s=function(e,t){return $(t).parents().is(".ui-dialog")?$(t).parents(".ui-dialog").last().find("form[name="+e+"]")[0]:$("form[name="+e+"]").first()[0]};t.GetForm=s;var l=function(){return!0};t.canSubmit=l;t.haveToLogout=function(){return window.isHaveToLogout};t.goCommonBack=function(){return"function"==typeof Back?Back():u()};var u=function(){return a().then((function(){return window.isHaveToLogout=!1,history.go(-1)}))};t.goHistoryBack=u;var c=function(e,t){var n;t&&(e.action=t),window.isHaveToLogout=!1;return(n=e.at||e.AT)||(n=/\bat\=/i.test(e.action)),!n&&void 0!==window.strATTok&&window.strATTok.length&&function(e,t,n){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)}(e,"at",window.strATTok),e.submit()};t.DoSubmit=c;t.goBack=function(e,t){return a().then((function(){return $('input[type="password"]',e).attr("disabled","disabled"),c(e,t)}))};var d=function(e,t){return r.default.when(window.bIsDBFree,window.canSubmit).then((function(){return $(document).trigger("showProcessing"),i(),c(document.forms[e],t)}))};t.ok_check_db=d;t.ok=function(e,t,n){var o;return o=null===n?document.forms[e]:s(e,n),r.default.when(l).then((function(){return c(o,t)}))};t.OnChangeSelect=function(e,t){a().then((function(){return d(e,t)})).fail((function(){document.forms[e].reset()}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowOpen=t.openTab=t.openPopupWindow=t.closeChildWindows=t.center=void 0,window.childWindows=[];var o=["_mail","_forum","_help","_qualityAssessmentAnalytics","_qualityAssessmentAnalyticsEM","nsxml","_staffAttest"],r=function(e){var t;return t=-1!=e.lastIndexOf("?")?"&":"?",e+(t+="at="+appContext.at+"&ver="+getVer())};t.openPopupWindow=function(e,t,n,o){var s=window.windows[e];try{s&&!s.closed&&"_qualityAssessmentAnalytics"!=e&&"_qualityAssessmentAnalyticsEM"!=e&&"_staffAttest"!=e&&(s.forceClosing=!0,s.close())}catch(e){console.log(e)}var l={url:r(t),name:e,specs:"status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,directories=no,width="+n+",height="+o,winChild:s};!s||s.closed||"_qualityAssessmentAnalytics"!=e&&"_qualityAssessmentAnalyticsEM"!=e?(a(l),s=window.windows[e]=l.winChild,i(s,n,o),s.focus()):s.focus()};t.openTab=function(e,t){var n=document.createElement("a");n.href=r(e),n.target=t||"_blank",document.body.appendChild(n),n.click(),n.remove()};var i=function(e,t,n){try{if(!e||!e.screen)return}catch(e){console.log(e)}if(!("undefined"!=typeof bowser&&bowser.webkit&&parseInt(bowser.version)<20)){var o=(e.screen.availWidth-t)/2,r=(e.screen.availHeight-n)/2;e.moveTo(o,r)}};t.center=i;var a=function(e){var t,n,r=e.url||"",i=e.name||"",a=e.specs||"";for((n=e.winChild)&&!n.closed&&n.close(),n=window.open(r,i,a),e.winChild=n,t=n.opener;t&&!t.closed;)try{t.childWindows.push(n),t=t.opener}catch(e){break}o.indexOf(i)<0&&$(window).on("unload",(function(e){if(n&&!n.closed)return n.forceClosing=!0,n.close()}))};t.windowOpen=a;t.closeChildWindows=function(){var e;for(e=window.childWindows.length;e>0;)window.childWindows[e-1]&&!window.childWindows.closed&&window.childWindows[e-1].close(),window.childWindows.pop(),e-=1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetSelectedTab=t.SetSelectedMenu=void 0;var o=n(14),r=n(15);t.SetSelectedTab=function(e,t){var n=document.forms.MenuForm;if(n)if(0!=t.length){var i=function(){if(0!==t.indexOf("tab:"))if(0!==t.indexOf("window:")){if(56===e)return t=(t.match(/\/$/)?t:t+"/")+"?SchoolYearId="+appContext.yearId+"&UserId="+appContext.userId,void(0,r.openPopupWindow)("_qualityAssessmentAnalytics",t,950,660);if(208===e)return t="".concat(t.match(/\/$/)?t:t+"/","?EMId=").concat(appContext.emId,"&UserId=").concat(appContext.userId,"&GlobalYearId=").concat(appContext.globalYearId),void(0,r.openPopupWindow)("_qualityAssessmentAnalyticsEM",t,950,660);n.elements.TabItem.value=e,n.action=t,window.isHaveToLogout=!1,n.submit()}else{var o=t.substring(7),i=66===e?"_staffAttest":e;(0,r.openPopupWindow)(i,o,1024,800)}else{var a=t.substring(4);(0,r.openTab)(a,"tab_"+e)}};if("function"==typeof window.AngularNavigateHandler)return window.isHaveToLogout=!1,window.AngularNavigateHandler(t).then(i,(function(){})),!0;(0,o.checkForChanges)().then(i)}else $.show.message("В процессе разработки...")};t.SetSelectedMenu=function(e,t){var n=document.forms.MenuForm;if(n)return(0,o.checkForChanges)().then((function(){return n.elements.MenuItem.value=e,n.elements.TabItem.value=0,n.action=t,window.isHaveToLogout=!1,n.submit()})),!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isButtonsLock=t.initButtonLock=void 0;var o=!1;t.isButtonsLock=function(){return!!o||(o=!0,setTimeout((function(){o=!1}),200),!1)};t.initButtonLock=function(){$("button[onclick]").each((function(){var e,t;return t=(e=$(this)).attr("onclick"),e.attr("onclick","if(isButtonsLock()) {return;}"+t)})),$("body").on("click","button:not([onclick])",(function(){if(!$.data(this,"isDblClickHandled")){var e=[];try{var t=$._data(this,"events");if(!t)return;if(!(e=t.click)||!Array.isArray(e))return}catch(e){return void console.log("error access element event list",e)}$.data(this,"lastClicked",(new Date).getTime()),$(this).on("click",(function(e){var t=$.data(this,"lastClicked"),n=(new Date).getTime();t&&n-t<200?(console.log("click lock"),e.stopImmediatePropagation()):$.data(this,"lastClicked",n)}));var n=e.pop();e.splice(0,0,n),$.data(this,"isDblClickHandled",!0)}}))}},function(e,t,n){var o,r,i,a,s,l,u,c,d,f,p,h,m,g,v,w,y,b,C,x,S,k,T,P,E,A,B,I,D,O,j,H,M,F,L,G,N,W,U,R;window.dataWereChanged=!1,window.bIsDBFree=!0,window.bNewWindow=!1,window.windows={},r=n(12),o=n(14),W=n(13).instance,$(document).ready((function(){return $(".switсh_year").on("click",(function(){return $(".switсh_year").toggleClass("go_left")}))})),v=function(){var e,t,n,o,r;for(n=$(window),e=v;e&&!((o=e.arguments[0])instanceof Event||o instanceof $.Event);)o=null,e=e.caller;return o&&(t=o.target||o.srcElement,(r=$(t).closest("div.modal.fade")).length&&(n=r)),n.prop("dataWereChanged",!0)},u=function(e){var t;if(0===arguments.length&&(e=wasSavedMsg),e&&!(e.length<1)){if("undefined"!=typeof Storage){if(void 0!==sessionStorage.showedWasSaved&&_.contains(sessionStorage.showedWasSaved.split(","),pageVer.toString()))return;void 0===sessionStorage.showedWasSaved&&(sessionStorage.showedWasSaved=""),sessionStorage.showedWasSaved+=pageVer+","}return t={},arguments[1]&&(t=arguments[1]),e.length>500&&(t.width=600),alert(e,t),window.dataWereChanged=!1}},C=function(e){return e||(e=event),e},f=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},S=function(e){return e.which?e.which:e.keyCode},k=function(e){return e.target?e.target:e.srcElement},U=function(e,t){var n,o,r;return(r=(o=$.Deferred()).promise()).fail((function(){return $.show.message(language.Generic.Common.kErrMsgNoChecks)})),(n=$("input[name='"+t+"']:checkbox:checked",e).length)>0?o.resolve(n):o.reject(n),r},M=function(e){var t,n;return e=C(e),n=S(e),t=k(e),!!G(e,n,t)&&a(e,n,t)},a=function(e,t,n){return!0},window.Back=null,G=function(e,t,n){return 123===t&&(window.isHaveToLogout=!1),116===t&&document.forms.length>0?(DoSubmit(document.forms[0],"#"),!1):"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName||8!==t||(f(e),window.Back&&window.Back(),!1)},$(document).on("keydown",M),D=window.alert,y=function(e,t){return alert(t).then((function(){return setTimeout((function(){return e.focus()}),100)}))},b=function(e,t){return $.show.error(t).then((function(){return setTimeout((function(){return e.focus()}),100)}))},x=function(e){var t,n,o,r,i;for(t=[],r=0,i=e.length;r<i;r++)o=e[r],n=$(o).serializeArray(),t=_.union(t,n);return t},B=function(e){var t,n,o,i,a,s,l,u,c,d,f,p,h,m,g,v;return o={form:"",action:"",auth:!0,nocache:!1,method:"POST",data:null,queryData:null,forceData:null,dataType:"JSON",headers:null,showProcessing:!1,showSuccessMessage:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",streamed:!1,streamReadInterval:200,defaultErrorHandling:!0,onStreamRead:function(e){},onSuccess:function(e){},onError:function(e,t,n){},onComplete:function(e,t,n){},rawSettings:null},u=$.extend({},o,e),c="",!1,u.form&&(g=void 0!==u.form.elements.AT,e.action||(u.action=u.form.action),c+="&"+$(u.form).serialize()),u.auth&&!g&&-1===u.action.indexOf("webapi")&&(c+="&AT="+strATTok),u.nocache&&(c+="&ver="+T()),u.queryData&&(d=$.param(u.queryData)).length>0&&(-1===u.action.indexOf("?")?u.action+="?"+d:u.action+="&"+d),u.data&&("application/json"===u.contentType?"object"==typeof u.data&&(c="&"+JSON.stringify(u.data)):"string"==typeof u.data?c+="&"+u.data:W.iterateParams(u.data,(function(e,t){c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}))),c.length>0&&(c=c.substring(1)),n=$.Deferred(),s=function(e,t,o){var i,a,s,l,c;return u.showProcessing&&$(document).trigger("closeProcessing"),u.streamed&&(clearInterval(p),h()),401===e.status?("SessionExpired"===e.getResponseHeader("auth-error")?f(null!=(s=language.Generic.Common.kTimeOutOccured4Ajax)?s:language.Generic.Common.kTimeOutSessionWarn).then((function(){return r.postTo({path:"/",method:"GET"})})):f(null!=(l=language.Generic.Common.kErrPageAccess)?l:"Ошибка доступа"),void n.reject()):(u.defaultErrorHandling&&(a=null,i=null,c=null,e.responseJSON&&e.responseJSON.message&&(a=e.responseJSON.message,i=e.responseJSON.details,c=e.responseJSON.stackTrace),e.responseJSON?f(a,i,c,e.responseJSON.isInformation):f(a,i,c)),u.onError(e,t,o),n.reject(e))},i=function(e){e&&e.message?f(e.message,e.details,e.stackTrace):f(),n.reject()},f=function(e,t,n,o){var r,i;return void 0===o&&(o=null),i=e&&"string"==typeof e?e:language.Generic.Common.kUnexpErr,(t||n)&&window.appContext&&"prod"!==window.appContext.environment&&(r="<div class='debug-panel'>",t&&(r+="<p class='title'>Details:</span><div>"+t+"</div>"),n&&(r+="<p class='title'>StackTrace:</span><div class='stack'>"+n+"</div>"),i+=r+"</div>"),o?$.show.message(i):$.show.error(i)},a=function(e,t,o){if(u.showProcessing&&$(document).trigger("closeProcessing"),u.streamed&&(clearInterval(p),h()),u.defaultErrorHandling){if("JSON"!==u.dataType)return u.onSuccess(e),void n.resolve(e);if(void 0===e)204!==o.status&&i();else if(null!=e?e.isError:void 0)return void i(e)}return u.showSuccessMessage&&e.message&&$.show.message(e.message),u.onSuccess(e),n.resolve(e)},t=function(e){if(u.headers)return W.iterateParams(u.headers,(function(t,n){return e.setRequestHeader(t,n)}))},u.showProcessing&&$(document).trigger("showProcessing"),l={type:u.method,url:u.action,contentType:u.contentType,data:u.forceData?u.forceData:c,dataType:u.dataType,success:a,error:s,complete:u.onComplete,beforeSend:t},u.auth&&"undefined"!=typeof strATTok&&(l.headers={at:strATTok}),u.streamed&&(v=jQuery.ajaxSettings.xhr(),l.xhr=function(){return v},m=0,h=function(){var e;try{return(e=v.responseText.substring(m))&&(m+=e.length,u.onStreamRead(e)),m}catch(e){e}},p=setInterval(h,u.streamReadInterval)),u.rawSettings&&(l=$.extend(l,u.rawSettings)),jQuery.ajax(l),n.promise()},A=function(e,t,n){var o;return o=function(t){return t.message&&alert(t.message),window.dataWereChanged=!1,$(e).rememberState()},t=t||{},B({form:e,action:n||e.action,data:t,showProcessing:!0,onSuccess:o})},T=function(){return(new Date).getTime()},I=function(e,t,n){e.location.href=t+"?"+n+"&ver="+T()},m=function(){var e,t,n,o,r,i;if((n=document.cookie)&&(t=n.split(";"),(e=n.match(/\b(ASPSESSIONID[A-Z]+)(?==)/g))&&e.length>48||t.length>50||n.length>4090))for(o=r=0,i=e.length-1;0<=i?r<=i:r>=i;o=0<=i?++r:--r)document.cookie=e[o]+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},F=function(){var e,t,n;e=$("input[type=text]:enabled:visible").not(".date-input,.date input"),n=$(window).height(),e.length>0&&(t=$(e[0])).height()+t.offset().top<n&&t.trigger("focus")},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),L=function(e,t,n){var o;return(o=new Image).src=1===n?e+"_on.gif":e+".gif",document[t].src=o.src},p=function(e,t,n){return!(e.value.length>t)||(alert("Поле '"+n+"' должно содержать не более "+t+" символов"),e.focus(),!1)},s=function(e){if(null!=e)o.checkForChanges().then((function(){return $.show.confirmation(language.Generic.Common.kExitConfirmationQuestion)})).then((function(){return r.postTo("/asp/logout.asp")}));else{if(!("undefined"!=typeof appContext&&null!==appContext?appContext.at:void 0))return;window.open(W.makeUrl("/asp/logout.asp"))}},R=!1,$(document).ready((function(){if(m(),!$("body").hasClass("print")&&(null==window.opener||window.opener.closed))return window.onunload=function(e){R||window.haveToLogout&&!window.haveToLogout()||s()},$(window).on("beforeunload",(function(){window.haveToLogout&&!window.haveToLogout()||(R=!0,s())}))})),P=function(e,t){var n;return n=function(){if(t)return t()},B({action:"/asp/scripts/ajaxmethods.asp",data:{method:"kHeavySessionIsPosible"},showProcessing:!0,defaultErrorHandling:!1,onSuccess:function(t){return t.isError||!t.data?(alert(t.message||language.Generic.Common.kUnexpErr),void n()):t.data.isPosible?void e():(alert(language.Generic.Common.kMaxHeavySessionsReached),void n())}})},c=function(e,t){return $("#WorkingInSystemCnt").html(t)},l=function(e,t,n,r){B({form:e,action:t,dataType:"html",showProcessing:!0,onSuccess:function(e,t){var i,a,s;if(/"isError":true}/i.test(e))return i=JSON.parse(e),void alert(i.message);a=$(e).filter("script[rel~=onclose]").html(),s=$(e).filter("script[rel~=onload]").html(),$.show.dialog({title:$("h1.title",e).text(),size:BootstrapDialog.SIZE_WIDE,onshown:function(t){$(".bootstrap-dialog-message").html(e),$("h1.title",$(".bootstrap-dialog-message")).remove(),r&&r(),$.globalEval(s)},onhide:function(e){return $.globalEval(a),o.setDBFree(),e.$modal.prop("dataWereChanged")&&n&&n(),!0}}).showInDialog="SID"},onError:function(e,t,n){return alert(t)}})},g=function(){return $.show.confirmation(language.Generic.Common.kExportIntoExcel,0,null,!1,"ShowExcelConfirm")},O=function(e,t,n){var o,r;return o=function(){var o,r;for(o in r=t+"?VER="+T()+"&AT="+strATTok,n)r+="&"+o+"="+n[o];return DoSubmit(e,r)},(r={})[$.show.defaults.yesText]=o,$.show.confirmation(language.Generic.Common.kExportIntoExcel,0,r,!1,"ShowExcelConfirm")},j=function(e,t,n){var o,r;return o=function(){var o;for(o in n)t+=o+"="+n[o]+"&";return DoSubmit(e,t)},(r={})[$.show.defaults.yesText]=o,$.show.confirmation(language.Generic.Common.kExportIntoExcel,0,r,!1,"ShowExcelConfirm")},i=function(e){var t;return void 0!==(t=$("select[name^=FilterEMID_] option:selected[value!=-1]").last().val())&&-1!==t||(t=e),t},d=function(e){var t,n,o,r;if(!!(o=navigator.userAgent).match(/Trident\/7\./)||o.indexOf("MSIE")>0)return r=!0,window.onblur=function(){return r=!1},t=function(){if(!r)return e.focus(),window.onblur=null,clearInterval(window.timer1)},window.timer1=setInterval(t,1e3);setTimeout((function(){$(document).trigger("showProcessing")}),500),n=function(){e.closed&&($(document).trigger("closeProcessing"),clearInterval(window.timer1))},window.timer1=setInterval(n,500)},h=function(e,t){var n,o,r,i,a;for(a="",n=!1,o=r=0,i=t.length-1;r<=i;o=r+=1)a=a+", "+t[o],e===t[o]&&(n=!0);return a=a.slice(1),!!n||(alert(language.Generic.SetupSchoolResources.kErrInvalidFileExt+a),!1)},E=function(e){var t,n;return n=(t=e.elements.EMAIL).value,!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*\.(\w{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/.test(n)||(t.focus(),alert(language.Generic.SetupSchoolUI.kSetEMail),!1)},N=function(e){var t,n;return t={viewHeader:!0},n=$.extend({},t,e),$(".print-block").printUtils().toPrint(n)},w=function(e){var t,n;return t={viewHeader:!0},n=$.extend({},t,e),$(".print-block").printUtils().toExcel(n)},H=function(e,t,n,o,r){var i,a,s,l,u,c,d;return d=null,i=null,u=new Array,c={replace:function(e,t){return $("table",t).addClass("table table-xs")},getSchoolCard:function(){var e;return e=$("<div>"),$("div.print-block").clone().find(".form-group").appendTo(e),e}},l=$.ajax({url:"/vendor/pages/templates/schoolCard/schoolCardTemplate.html",cache:!0,success:function(e){return d=e.replace(/(?:\r\n|\r|\n)/g,"")}}),a=$.ajax({url:"/vendor/pages/templates/schoolCard/formGroupTemlate.html",cache:!0,success:function(e){var t;return t=e.replace(/(?:\r\n|\r|\n)/g,""),Handlebars.registerPartial("formGroup",t)}}),s=B({action:"/webapi/schools/"+e+"/card",showProcessing:!0,method:"GET",onSuccess:function(e){return e.commonInfo.foundingDate&&(e.commonInfo.foundingDate=dateUtils.date2str(new Date(e.commonInfo.foundingDate))),e.commonInfo.locationInfo&&(e.commonInfo.locationInfo.inProvinceCenter=e.commonInfo.locationInfo.inProvinceCenter?language.Generic.Common.kYes:language.Generic.Common.kNo,e.commonInfo.locationInfo.isProvinceSchoolInCity=e.commonInfo.locationInfo.isProvinceSchoolInCity?language.Generic.Common.kYes:language.Generic.Common.kNo),i={schoolCard:e,language:language,isDefaultLangRus:r,functionalities:{isSchool:2===appContext.funcType,isPreSchool:t,isAddSchool:n,isOrphanageSchool:o}}}}),u.push(l),u.push(a),u.push(s),extDeferred.when(u).then((function(){var e,t,n;return n=Handlebars.compile(d),e=n(i),t=function(){var t;return t={viewHeader:!0,processingFunc:[c.replace],header:language.Generic.SchoolInfo.kTitleSchoolInfoCard,titleWindow:"<%=NETSCHOOL_PRODUCT_NAME%>. "+language.Generic.SchoolInfo.kTitleSchoolInfoCard,showFilters:!1},e=e.split("background-color: RGB( 238, 238, 238);").join("padding:0;"),$(e).printUtils().toPrint(t)},$.show.dialog({size:BootstrapDialog.SIZE_WIDE,title:language.Generic.SchoolInfo.kTitleSchoolInfoCard,message:e,buttons:[{label:language.Generic.Buttons.kPrint,action:t,cssClass:"btn-primary"}]})}))},e.exports={GetLocalEmId:i,KeyDown:a,Logout:s,ShowInDialog:l,WasSaved:u,WorkInSystemUpdater:c,blockMainWindow:d,cancel_event:f,checkAreaLength:p,checkFileExtension:h,clearASPSESSIONID:m,confirmExcel:g,dataChanged:v,exportToExcel:w,focusAlert:y,focusError:b,getEvent:C,getFormsParams:x,getKeyCode:S,getTargetElement:k,getVer:T,heavyAction:P,isEMailValid:E,jsSaveForm:A,jsSubmit:B,jumpVer:I,lalert:D,openExcelCommon:O,openExcelVersn:j,openSchoolInfo:H,processKeyDown:M,setFocus:F,setImgState:L,shouldProcessKey:G,showPrintVersion:N,whenChecked:U,urlHelper:W}},function(e,t){!function(e){var t,n,o,r,i;n=function(e){var t,n,o;if(e.length)return e;for(n in o=[],e)t=e[n],o.push({label:n,action:t});return o},r=function(t,n){var o,r,i,a;for(r=i=0,a=t.length;i<a;r=++i)if((o=t[r]).label===n.label)return void(t[r]=e.extend(n,o));return t.push(n)},o=function(t){var n;return t?((n=e.extend({},t)).onhide=t.close,n):{}},t=[],i={},e.show={defaults:{okText:language.Generic.Common.kOk,errorTitle:language.Generic.Common.kErrorMsgEmotional,messageTitle:language.Generic.Announcement.kDescription,confirmationTitle:language.Generic.Common.kAttention,yesText:language.Generic.Common.kYes,noText:language.Generic.Common.kNo,processingTitle:language.Generic.Common.kWait,processingText:language.Generic.Common.kProcessing,loadingText:language.Generic.Common.kLoad,selfErrorText:language.Generic.Common.kPageErrWrongCall,noAskText:language.Generic.Common.kNoAsk,checkBoxId:"MyCheckBox",cancelText:language.Generic.Buttons.kCancel},message:function(t,n,r){var a,s,l,u,c;if(void 0!==t)return s=e.Deferred(),a={title:"string"==typeof n?n:i.messageTitle,message:t,type:BootstrapDialog.TYPE_INFO,buttons:[{label:i.okText,hotkey:13,icon:"glyphicon glyphicon-ok-sign",action:function(e){return e.close()}}]},(c=e.extend({},a,o(r))).onhide?(l=c.onhide,c.onhide=function(e){return l(e),s.resolve(e)}):c.onhide=function(e){return s.resolve(e)},(u=BootstrapDialog.show(c)).getModal().on("keyup",(function(e){if(32===e.which)return u.close()})),u.isMessage=!0,s.promise();e.show.error(i.selfErrorText+' "$.show.message"')},dialog:function(t){var n,o,r,i,a,s,l,u,c,d;if((null!=(u=t.message)?u.jquery:void 0)&&"script"===t.message.prop("tagName").toLowerCase()&&(t.message=t.message.html().replace(/(?:\r\n|\r|\n)/g,"")),t.draggable=!0,d=function(e,t,n){if(e.icon||(e.icon=t),!e.cssClass)return e.cssClass=n},t.buttons){for(r=!1,s=0,l=(c=t.buttons).length;s<l;s++){switch((n=c[s]).label){case language.Generic.Common.kOk:case language.Generic.Common.kYes:d(n,"glyphicon glyphicon-ok-sign","btn-primary");break;case language.Generic.Common.kNo:d(n,"glyphicon glyphicon-remove-sign","btn-default");break;case language.Generic.Buttons.kAdd:d(n,"glyphicon glyphicon-plus-sign","btn-primary");break;case language.Generic.Buttons.kCreate:d(n,"glyphicon glyphicon-file","btn-primary");break;case language.Generic.Buttons.kApply:d(n,"glyphicon glyphicon-ok-sign","btn-primary");break;case language.Generic.Buttons.kSave:d(n,"glyphicon glyphicon-floppy-save","btn-primary");break;case language.Generic.Buttons.kEdit:d(n,"glyphicon glyphicon-pencil","btn-primary");break;case language.Generic.Buttons.kRemove:d(n,"glyphicon glyphicon-minus-sign","btn-danger");break;case language.Generic.Buttons.kContinue:d(n,"glyphicon glyphicon-new-window","btn-primary");break;case language.Generic.Buttons.kRefresh:d(n,"glyphicon glyphicon-refresh","btn-default");break;case language.Generic.Calendar.kClose:r=!0,d(n,"glyphicon glyphicon-remove","btn-default");break;case language.Generic.Buttons.kCancel:r=!0,d(n,"glyphicon glyphicon-ban-circle","btn-default")}n.action=_.debounce(n.action,500,!0)}r||t.withoutCancelButton||(t.closeByKeyboard=!1,t.buttons.push({hotkey:27,label:language.Generic.Buttons.kCancel,action:function(t){return e(document.activeElement).trigger("blur"),t.close()},icon:"glyphicon glyphicon-ban-circle",cssClass:"btn-default"}))}return a=t.onshown,t.onshown=function(t){if(e("input:visible, select:visible",t.$modalContent).first().trigger("focus"),a)return a(t)},i=t.onhide,t.onhide=function(t){return!!t.$modal.prop("forceClose")||(t.$modal.prop("dataWereChanged")?(e.show.confirmation(language.Generic.Common.kDataWereChanged).then((function(){return i&&!i(t)||t.forceClose(),t.$modal.prop("dataWereChanged",!1)})),!1):!i||i(t))},o=new BootstrapDialog(t),o=e.extend(o,{forceClose:function(){return o.$modal.prop("forceClose",!0),o.close()},successClose:function(){return o.$modal.prop("dataWereChanged",!1),o.forceClose()}}),e(document).trigger("dialog-opened"),t.deferredOpen||o.open(),o},confirmation:function(t,o,a,s,l){var u,c,d,f,p,h,m,g,v,w,y,b,C;if(void 0!==t){for(p=[{label:i.yesText,cssClass:"btn-primary",icon:"glyphicon glyphicon-ok-sign",hotkey:13,action:function(){}},{label:i.noText,icon:"glyphicon glyphicon-remove-sign",action:function(){}}],a||(a=[]),d=n(a),m=0,w=p.length;m<w;m++)r(d,p[m]);if(h=e.Deferred(),void 0!==l){for(g=0,y=d.length;g<y;g++)(u=d[g]).label===i.yesText&&(c=u.action);if("1"===e.cookie(l))return c(),h.resolve(i.yesText),h.promise();d.unshift({label:i.yesText+", "+i.noAskText,action:function(){return e.cookie(l,1,{expires:30,path:"/"}),c()}})}for(v=0,b=d.length;v<b;v++){if("function"!=typeof(u=d[v]).action)return void e.show.error(i.selfErrorText+' "$.show.confirmation" '+u.label);u.action=function(){var e;return e={action:u.action,label:u.label},function(t){return t.close(),e.action(),e.label===i.noText?h.reject(e.label):h.resolve(e.label)}}()}return C=t.replace(/\\n/g,"\n"),f={title:"string"==typeof o?o:i.confirmationTitle,message:C,type:BootstrapDialog.TYPE_PRIMARY,buttons:d},void 0!==s&&s&&(f.closable=!1),BootstrapDialog.show(f),h.promise()}e.show.error(i.selfErrorText+' "$.show.confirmation" (p1)')},getConfirmation:function(t,n,o,r,i){return function(){return e.show.confirmation(t,n,o,r,i)}},prompt:function(t,n,o){var r,a,s,l,u;if(void 0!==t)return a=t+': <input type="text" class="form-control">',s=e.Deferred(),l=function(t){return e("input",t.getModalContent()).val()},r=function(e){var t;return t=l(e),!o||o(t)},u={title:"string"==typeof n?n:i.messageTitle,message:a,closable:!0,type:BootstrapDialog.TYPE_INFO,buttons:[{label:i.okText,hotkey:13,action:function(e){var t;return!!r(e)&&(t=l(e),e.close(),s.resolve(t))}},{label:i.cancelText,action:function(e){return l(e),e.close(),s.reject}}]},BootstrapDialog.show(u),s.promise();e.show.error(i.selfErrorText+' "$.show.message"')},fileDialog:function(t){var n,o,r,i,a,s,l,u;return l=e.Deferred(),o=function(e,t,n){var o;return(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)},n=function(){var n,o,r,i,a,s,l,u,c;if(!(r=e("#fileName").val()))return alert(language.Generic.SetupSchoolUI.kMsgSelectFileName),!1;if(t.fileExts){for(u=(n=r.split("\\"))[n.length-1].toLowerCase(),a=!1,i=0,l=(c=t.fileExts).length;i<l;i++)s=(o=c[i]).length,u.substr(u.length-s,s)===o&&(a=!0);if(!a)return alert(t.invalidFileExtMsg?t.invalidFileExtMsg:language.Generic.Curriculum.kInvalidImportFileFormat),!1}return!t.customCheck||t.customCheck()},r=null,a=function(e){return e.close()},i=function(i){return extDeferred.when(n).then((function(){var n,a,s,l;if(t.preSubmit&&t.preSubmit(),t.isAjax)r.submit(),e(document).trigger("showProcessing");else{if(n=document.forms.selectFile,t.target?(n.target=t.target,s={url:"/asp/blank.htm",name:t.target,specs:"status=no,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,directories=no, width=1200px, height=500px"},windowOpen(s),l=s.winChild):e(document).trigger("showProcessing"),t.handlerApplyBtn&&t.handlerApplyBtn(l),o(n,"VER",getVer()),o(n,"AT",strATTok),t.submitParams)for(a in t.submitParams)o(n,a,t.submitParams[a]);t.isHeavyAction?heavyAction((function(){return DoSubmit(n,t.url)}),(function(){return l.close()})):DoSubmit(n,t.url),i.close()}}))},s=(s=(s=(s='{0} <form name="selectFile" method="post" enctype="multipart/form-data"> {2} <div class="form-group"> <div class="input-group"> <span class="btn btn-primary btn-file input-group-addon">'+language.Generic.Common.kSelectFile+'<input type="file" name="file" id="fileupload"> </span> <input type="text" class="form-control" disabled id="fileName"> </div> </div> {1} <div class="alert alert-info" role="alert" style="display: none;" id="explanation"></div> </form>').replace("{0}",void 0!==t.contentHtml?t.contentHtml:"")).replace("{1}",void 0!==t.additionalContent?t.additionalContent:"")).replace("{2}",void 0!==t.formAppendContent?t.formAppendContent:""),e.show.dialog({title:t.title,message:s,onshown:function(n){var o,i;if(e('input[name="file"]').on("change",(function(){var n,o;if(o=(n=this.value.split("\\"))[n.length-1],e(this).parent().parent().find("#fileName").val(o).attr("title",o),t.maxFileSize&&this.files&&this.files[0]&&this.files[0].size>1024*t.maxFileSize)return alert(language.Generic.SetupSchoolPortfolio.kFileSizeCantBeGreaterThan+t.maxFileSize+" KB")})),t.content&&(e("#explanation").show(),e("#explanation").text(t.content)),t.onShownDlg&&t.onShownDlg(),t.isAjax)return e("#fileupload").on("fileuploadsubmit",(function(n,o){var r,i,a,s,l,u;for(r={fileName:e("#fileName").val()},e('input[name="Separator"]').length&&(r.Separator=e('input[name="Separator"]').val()),a=0,s=(l=e("form[name=selectFile]").find("input,select").serializeArray()).length;a<s;a++)i=l[a],(null!=(u=t.submitParams)?u[i.name]:void 0)||(r[i.name]=i.value);o.formData=e.extend({},r,t.submitParams)})),o=e.extend({},{_AJAXCALL_:1},t.queryStringParams),i=urlHelper.makeUrl(t.url,o),e("#fileupload").fileupload({url:i,dataType:"json",add:function(e,t){return r=t},done:function(o,r){return e(document).trigger("closeProcessing"),r.result?r.result.isError?e.show.error(r.result.message):(t.handlerAjaxSuccess&&t.handlerAjaxSuccess(r.result),n.close(),l.resolve(r.result)):e.show.error(language.Generic.Common.kUnexpErr)},fail:function(t,n){var o,r;if(e(document).trigger("closeProcessing"),401!==n.jqXHR.status)return n.jqXHR.responseJSON.isError||n.jqXHR.responseJSON.message?e.show.error(n.jqXHR.responseJSON.message):void 0;"SessionExpired"===n.jqXHR.getResponseHeader("auth-error")?e.show.error(null!=(o=language.Generic.Common.kTimeOutOccured4Ajax)?o:language.Generic.Common.kTimeOutSessionWarn):e.show.error(null!=(r=language.Generic.Common.kErrPageAccess)?r:language.Generic.Login.kErrAccessDenied)}})},buttons:[{label:null!=(u=t.applyBtnText)?u:language.Generic.Common.kOk,action:i},{label:language.Generic.Buttons.kCancel,action:a}]}),l.promise()},alert:function(n,o){var r,i,a;if(i=!1,e.each(BootstrapDialog.dialogs,(function(e,t){if(!t.closing&&t.isMessage)return i=!0})),!i)return a=null,document.activeElement&&("INPUT"!==(r=document.activeElement.tagName.toUpperCase())&&"SELECT"!==r||(a=document.activeElement)),e.show.message(n,language.Generic.Common.kAttention,o).then((function(n){if(n.closing=!0,a&&setTimeout((function(){return a.focus()}),200),t.length>0)return e.show.alert.apply(this,t[0]),t.shift()}));t.push(arguments)},longWork:function(t,n,o,r){var a,s,l,u,c,d;if(o=o||{},void 0!==t)return void 0===n&&(n=language.Generic.Curriculum.kPleaseWait),(a=e("<div><div class='progress'><div class='progress-bar progress-bar-striped active' role='progressbar' style='width: 1%'></div></div></div>")).prepend("<span class='dialog-message'>"+t+"</span>"),o.content&&a.append(o.content),u=e(".progress-bar",a),r||(r=function(){var e;return e=u.width()/u.parent().width()*100,e+=100*s(e/100)*2}),c=function(){var e;return e=r(),u.css("width",e+"%")},d=null,setTimeout((function(){return d=setInterval(c,100)}),200),s=function(e){var t;return e>=1?(clearInterval(d),0):(t=0,e>=0&&e<.25?t=(3*Math.random()+3)/100:e>=.25&&e<.65?t=3*Math.random()/100:e>=.65&&e<.9?t=Math.random()/100:e>=.9&&e<.99?t=.001:(clearInterval(d),t=0),t)},(l=e.extend({},{message:a,title:n,closable:!1,closeByBackdrop:!1,closeByKeyboard:!1},o)).onshow=function(t){if(e("body").css("cursor","wait"),o.onshow)return o.onshow(t)},l.onhide=function(t){if(clearInterval(d),e("body").css("cursor",""),o.onhide)return o.onhide(t)},BootstrapDialog.show(l);e.show.error(i.selfErrorText+' "$.show.longWork"')},error:function(t,n){return e.show.message(t,n||i.errorTitle,{type:BootstrapDialog.TYPE_DANGER})},success:function(t,n){return e.show.message(t,n||i.messageTitle,{type:BootstrapDialog.TYPE_SUCCESS})},processing:function(t,n){return e.show.processing.current=e.show.longWork(null!=t?t:i.processingText,'<span class="glyphicon glyphicon-time"></span> '+(n||i.processingTitle))},loading:function(){return e.show.loading.current=e.show.longWork(i.loadingText,i.loadingText)},modelDialog:function(t){var n,o,r,i,a,s;return a=function(){},o=function(){},n=function(e){return e.close(),o(e)},i=function(e){return a(e)},r=Handlebars.compile(t.template)(t.model),t.message=r,t.buttons=[{label:language.Generic.Buttons.kSave,action:i},{label:language.Generic.Buttons.kCancel,action:n}],s={then:function(e,t){a=e,t&&(o=t)},done:function(e){a=e},fail:function(e){o=e}},e.show.dialog(t),s}},i=e.extend({},e.show.defaults),window.alert=e.show.alert,e((function(){var t;return(t=e(document)).on("showError",(function(t,n){return e.show.error(n.message,n.onClose)})),t.on("showMessage",(function(t,n){return e.show.message(n.message,n.title)})),t.on("showConfirmation",(function(t,n){return e.show.confirmation(n.message,n.title,n.yesFunc,n.noFunc)})),t.on("showProcessing",(function(t,n){if(!e.show.processing.current)return e.show.processing()})),t.on("closeProcessing",(function(t,n){if(e.show.processing.current)return e.show.processing.current.close(),e.show.processing.current=null})),t.on("showLoading",(function(t,n){return e.show.loading()})),t.on("closeLoading",(function(t,n){if(e.show.processing.current)return e.show.loading.current.close()}))}))}(jQuery)},function(e,t,n){"use strict";$(document).ready((function(){$(window);var e=$(".form-edit");if(1===e.length){var t=$(".buttons-panel"),n=e.find(".form-group").first();if(!(n.closest(".panel-body").length>0)){var o=n.clone();return o.find("label.control-label").empty().addClass("hidden-sm").addClass("hidden-xs"),t.detach(),o.find("div").first().empty().append(t),o.insertBefore(n)}}}))},function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonsPanelCtrl=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buttonsPanelTopOffset=void 0,this.fixedButtonsPanel=void 0,this.fixedExtraButtons=void 0,this.rightButtonsCnt=void 0,this.actionsWidth=void 0,this.minScreenWidth=void 0,this.observers=void 0,this.fixRightMargin=void 0,this.wnd=void 0,$(".buttons-panel-fixed").remove(),this.wnd=$(window),this.buttonsPanelCust=null,this.buttonsPanelTopOffset=0,this.fixRightMargin=17,this.fixedButtonsPanel=null,this.fixedExtraButtons=null,this.rightButtonsCnt=0,this.actionsWidth=0,this.minScreenWidth=600,this.observers=[]}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;if(this.buttonsPanelCust=$(".buttons-panel").filter(":not(.no-actions)"),this.buttonsPanelCust.length>1&&(this.buttonsPanelCust=this.buttonsPanelCust.filter(":visible"),this.buttonsPanelCust.length?this.buttonsPanelCust=this.buttonsPanelCust.first():this.buttonsPanelCust=$(".buttons-panel").first()),this.buttonsPanelTopOffset=this.buttonsPanelCust.length?this.buttonsPanelCust.offset().top:0,this.addActionsButtons(this.buttonsPanelCust),this.buttonsPanelCust){var t=null,n=function(){if(0!==$("body").scrollTop())return $(".buttons-panel-adaptive").removeClass("open");e.fixedButtonPanelHandler()};return this.wnd.on("scroll",(function(){return t&&window.clearTimeout(t),t=window.setTimeout(n,50)})),this.wnd.on("resize",(function(){if(e.wnd.scrollTop()>e.buttonsPanelTopOffset)return e.adaptiveButtonPanelHandler(e.fixedButtonsPanel);e.adaptiveButtonPanelHandler(e.buttonsPanelCust)})),$(document).on("pageReady",(function(){e.adaptiveButtonPanelHandler(e.buttonsPanelCust),e.actionsWidth=e.buttonsPanelCust.find(".buttons-panel-adaptive").outerWidth()})),this.adaptiveButtonPanelHandler(this.buttonsPanelCust)}}},{key:"cloneButtonsPanel",value:function(){var e=this;this.buttonsPanelCust.is(":visible")||this.init(),this.fixedButtonsPanel=this.buttonsPanelCust.clone(),this.fixedButtonsPanel.find("button").each((function(){$(this).closest(".buttons-panel-left").length||$(this).closest(".buttons-panel-right").length||$(this).remove()})),this.fixedButtonsPanel.hasClass("buttons-panel")||(this.fixedButtonsPanel.wrap('<div class="buttons-panel"></div>'),this.fixedButtonsPanel=this.fixedButtonsPanel.parent(".buttons-panel"));var t=$(".buttons-panel.extra");if(t.length&&!this.fixedButtonsPanel.hasClass("extra")){var n=this.fixedButtonsPanel.find(".buttons-panel-left"),r=t.find(".buttons-panel-left");n.length?r.find("button").each((function(){return n.append($(this).clone())})):this.fixedButtonsPanel.prepend(r.clone())}var i,a,s=this.fixedButtonsPanel.find("button[ng-click]");if(s.length){var l={attributes:!0},u=function(n,o){var r=e.buttonsPanelCust;t&&(r=r.add(t));var i=r.find(n+"[ng-click='"+o.attr("ng-click")+"']");if(i.length>1&&(i=r.find(n+"[title='"+o.attr("title")+"']")),0!==i.length){var a=new MutationObserver((function(){return o.prop("disabled",i.prop("disabled"))}));return e.observers.push(a),a.observe(i[0],l),o.on("click",(function(){return i.trigger("click")}))}};s.each((function(){u("button",$(this))})),this.fixedButtonsPanel.find(".btn-group > .dropdown-menu a").each((function(){u(".btn-group > .dropdown-menu a",$(this))}));var c=function(t){var n="button[ng-click='"+$(t).attr("ng-click")+"']";e.fixedButtonsPanel.find(n).remove()},d=_.debounce((function(){console.log("initing buttons"),e.fixedButtonsPanel.remove(),e.fixedButtonsPanel=null,e.disposeObservers(),e.cloneButtonsPanel()}),200);i=this.buttonsPanelCust[0],(a=new MutationObserver((function(e){var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.addedNodes.length)return void d();var i,a=o(r.removedNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;"BUTTON"==s.nodeName?c(s):$("button",s).each((function(e,t){return c(t)}))}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}}))).observe(i,{childList:!0,subtree:!0}),e.observers.push(a)}var f=$.uicontrols.button({icon:"circle-arrow-up",label:language.Generic.Buttons.kToUp,click:function(){return $("html, body").animate({scrollTop:0},600)}}),p=$("<div class='buttons-up'></div>").append(f);return this.fixedButtonsPanel.prepend(p),this.fixedButtonsPanel.addClass("buttons-panel-fixed").appendTo("body"),this.fixedButtonsPanel}},{key:"addActionsButtons",value:function(e){var t=e.find(".buttons-panel-right").filter(":not(.no-actions)");t.addClass("dropdown-menu  buttons-panel-adaptive-wrapper  pull-right").attr("role","menu");var n=t.find("button");if(this.rightButtonsCnt=n.length,0!=t.length){var o=$("<div></div>").addClass("buttons-panel-adaptive buttons-text").addClass("btn-group");$('<button type="button" />').addClass("btn").addClass("dropdown-toggle").attr("data-toggle","dropdown").attr("aria-expanded","false").append('<span class="glyphicon glyphicon-menu-hamburger" />').append(' <span id="action">Действия</span> ').append('<span class="caret" />').appendTo(o),t.appendTo(o),o.appendTo(e)}}},{key:"getMinWidth",value:function(){var e=window.innerWidth-document.documentElement.clientWidth;return this.minScreenWidth-e}},{key:"adaptiveButtonPanelHandler",value:function(e){if(0!==this.rightButtonsCnt)if(this.wnd.outerWidth()<700)$(".buttons-panel-fixed").css({display:"none"});else{var t=e.find(".buttons-panel-left");0==t.length&&(t=$(".buttons-panel.extra").find(".buttons-panel-left"));var n=e.find(".buttons-panel-right"),o=e.find(".buttons-panel-adaptive");if(0==o.length&&(o=e),0!==this.actionsWidth||(this.actionsWidth=o.outerWidth(),0!==this.actionsWidth)){var r=e.find(".buttons-up"),i=e.outerWidth(),a=t.outerWidth(),s=n.outerWidth(),l=o.find("#action"),u=l.closest(".dropdown-toggle").clone();u.css({display:"block",position:"absolute",height:0,top:0,left:"-10000px"});var c=u.find("#action").css({display:"inline"});u.appendTo("body");var d=c.outerWidth();u.remove();var f=a+s;r.length&&(f+=r.outerWidth());var p=r.outerWidth(),h=0,m=t.children('[class ^= "btn"]');0!==t.length&&m.each((function(e){p+=$(this).outerWidth()+parseInt($(this).css("margin-right"))}));var g=o.clone();g.css({position:"absolute",height:0,top:0,left:"-10000px"}),g.find(".buttons-panel-adaptive-wrapper").css({display:"block"});var v=g.find(".buttons-panel-adaptive-wrapper").children('[class ^= "btn"]');g.appendTo("body"),v.each((function(e){h+=$(this).outerWidth()})),g.remove();var w=e.width();return f>=i?(null!==a&&(a+this.actionsWidth>=i?l.hide():l.show(),0==$(".buttons-panel-fixed").length?$(window).width()-this.fixRightMargin>p+h-d?l.show():l.hide():w>p+h-d?l.show():l.hide()),o.show()):w<=p+h?(o.removeClass("buttons-text"),w>p+h-d?l.show():l.hide()):o.addClass("buttons-text"),o.has("li").length?void 0:o}}else $(".buttons-panel-adaptive").css({display:"none"})}},{key:"disposeObservers",value:function(){for(var e in this.observers)this.observers[e].disconnect()}},{key:"fixedButtonPanelHandler",value:function(){var e=this.getMinWidth();if(0===this.buttonsPanelTopOffset&&(this.buttonsPanelTopOffset=this.buttonsPanelCust.length?this.buttonsPanelCust.offset().top:0),this.wnd.scrollTop()>this.buttonsPanelTopOffset){if(this.wnd.width()<=e)return;if(this.fixedButtonsPanel)return;if(null!=this.fixedExtraButtons?this.fixedExtraButtons.length:void 0){var t=this.fixedButtonsPanel.find(".buttons-panel-left");for(var n in t.length||(t=$("<div></div>").addClass("buttons-panel-left").insertAfter(this.fixedButtonsPanel.find(".buttons-up"))),this.fixedExtraButtons){var o=this.fixedExtraButtons[n];t.append($.uicontrols.button(o))}}return this.cloneButtonsPanel(),this.adaptiveButtonPanelHandler(this.fixedButtonsPanel),this.fixedButtonsPanel}if(this.wnd.scrollTop()<=this.buttonsPanelTopOffset){if(!this.fixedButtonsPanel)return;var r=this;return this.fixedButtonsPanel.fadeOut("700",(function(){return r.fixedButtonsPanel=null,r.disposeObservers(),$(this).remove()}))}}},{key:"addFixedExtraButtons",value:function(e){return this.fixedExtraButtons=e}}])&&i(t.prototype,n),r&&i(t,r),e}();t.ButtonsPanelCtrl=a,$(document).ready((function(){window.setTimeout((function(){var e=new a;window.buttonsPanelCtrl=e,e.init()}),50)}))},function(e,t,n){"use strict";jQuery.cookie=function(e,t,n){if(void 0===t){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),i=0;i<r.length;i++){var a=jQuery.trim(r[i]);if(a.substring(0,e.length+1)==e+"="){o=decodeURIComponent(a.substring(e.length+1));break}}return o}n=n||{},null===t&&(t="",n.expires=-1);var s,l="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(s=new Date).setTime(s.getTime()+24*n.expires*60*60*1e3):s=n.expires,l="; expires="+s.toUTCString());var u=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),l,u,c,d].join("")}},function(e,t,n){"use strict";
/**
 * @preserve 
 * bootpag - jQuery plugin for dynamic pagination
 *
 * Copyright (c) 2013 botmonster@7items.com
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://botmonster.com/jquery-bootpag/
 *
 * Version:  1.0.5
 *
 */!function(e,t){e.fn.bootpag=function(t){var n=this,o=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;"},n.data("settings")||{},t||{});if(o.total<=0)return this;function r(t,r){var a,s=0==o.maxVisible?1:o.maxVisible,l=o.maxVisible,u=Math.floor((r-1)/s)*s,c=t.find("li");o.page=r=r<0?0:r>o.total?o.total:r,c.removeClass("disabled"),a=r-1<1?1:o.leaps&&r-1>=o.maxVisible?Math.floor((r-1)/s)*s:r-1,c.first().toggleClass("disabled",1===r).attr("data-lp",a).find("a").attr("href",i(a));l=1==o.maxVisible?0:1;a=r+1>o.total?o.total:o.leaps&&r+1<o.total-o.maxVisible?u+o.maxVisible+l:r+1,c.last().toggleClass("disabled",r===o.total).attr("data-lp",a).find("a").attr("href",i(a));var d=c.filter("[data-lp="+r+"]");if(!d.not(".next,.prev").length){var f=r<=u?-o.maxVisible:0;c.not(".next,.prev").each((function(t){a=t+1+u+f,e(this).attr("data-lp",a).toggle(a<=o.total).find("a").html(a).attr("href",i(a))})),d=c.filter("[data-lp="+r+"]")}d.addClass("disabled"),n.data("settings",o)}function i(e){return o.href.replace(o.hrefVariable,e)}return e.isNumeric(o.maxVisible)||o.maxVisible||(o.maxVisible=o.total),n.data("settings",o),this.each((function(){var t,a,s=e(this),l=['<ul class="pagination bootpag">'];o.prev&&l.push('<li data-lp="1" class="prev"><a href="'+i(1)+'">'+o.prev+"</a></li>");for(var u=1;u<=Math.min(o.total,o.maxVisible);u++)l.push('<li data-lp="'+u+'"><a href="'+i(u)+'">'+u+"</a></li>");o.next&&(a=o.leaps&&o.total>o.maxVisible?Math.min(o.maxVisible+1,o.total):2,l.push('<li data-lp="'+a+'" class="next"><a href="'+i(a)+'">'+o.next+"</a></li>")),l.push("</ul>"),s.find("ul.bootpag").remove(),s.append(l.join("")),t=s.find("ul.bootpag"),s.find("li").click((function(){var o=e(this);if(!o.hasClass("disabled")){var i=parseInt(o.attr("data-lp"),10);r(t,i),n.trigger("page",i)}})),r(t,o.page)}))}}(jQuery,window)}]);